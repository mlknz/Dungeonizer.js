!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(2),a=o(r),s=n(16),c=o(s),d=n(17),l=function u(){function e(){var e=Math.floor(o.clientWidth*p),t=Math.floor(o.clientHeight*p);o.width===e&&o.height===t||(l.resize(e,t),o.width=e,o.height=t,s.resize(e,t)),h.viewport(0,0,h.drawingBufferWidth,h.drawingBufferHeight)}function t(){e(),s.update(m.getDelta()),requestAnimationFrame(t)}if(i(this,u),!d())return void(document.body.innerHTML="Unable to initialize WebGL. Your browser may not support it.");var n=new THREE.WebGLRenderer({antialias:!0,alpha:!0});if(n.extensions.get("ANGLE_instanced_arrays")===!1)return void(document.body.innerHTML="Unable to get ANGLE_instanced_arrays WebGL extension. Your browser may not support it.");var o=n.domElement;o.className="canvas";var r=document.getElementById("root");r.appendChild(o),r.style.backgroundColor="red";var s=new a["default"](n),l=new c["default"](s);l.resetDungeon();var h=n.getContext(),p=window.devicePixelRatio||1,m=new THREE.Clock;t()};window.app=new l},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(3),s=o(a),c=n(9),d=o(c),l=n(12),u=o(l),h=n(15),p=o(h),m=n(4),f=o(m),v=function(){function e(t){i(this,e),this.renderer=t,this.renderer.setClearColor(0,!1),this.renderer.setPixelRatio(window.devicePixelRatio||1);var n=this.renderer.getContext(),o=n.canvas.clientWidth/n.canvas.clientHeight;this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(60,o,f["default"].camera.near,f["default"].camera.far),this.controls=new s["default"](this.camera,this.renderer.domElement,this.scene),this.controls.resetCameraOrbit();var r=new THREE.DirectionalLight(7368816);r.position.set(10,20,10),this.scene.add(r);var a=new THREE.DirectionalLight(7368816);a.position.set(-30,20,10),this.scene.add(a)}return r(e,[{key:"createDungeonMesh",value:function(e,t){var n=Boolean(e.mstLines&&e.leftAliveLines&&e.delaunayTriangles&&e.trashRooms),o=Boolean(e.walls),i=new THREE.Object3D;i.name="Dungeon_"+t;var r=new d["default"](e.rooms,{isDebug:n,isTrashFloors:!1,config:f["default"].visParams});r.frustumCulled=!1,i.add(r);var a=new u["default"](e.tunnels,{isDebug:n,config:f["default"].visParams});if(a.frustumCulled=!1,i.add(a),o){var s=new u["default"](e.walls,{isDebug:n,config:f["default"].visParams,isWall:!0});s.frustumCulled=!1,i.add(s)}if(n){var c=new p["default"](e.delaunayTriangles,8947848);i.add(c);var l=new p["default"](e.mstLines,255);i.add(l);var h=new p["default"](e.leftAliveLines,16711680);i.add(h);var m=new d["default"](e.trashRooms,{isDebug:n,isTrashFloors:!0,config:f["default"].visParams});m.frustumCulled=!1,i.add(m)}return i}},{key:"update",value:function(e){this.controls.update(e),this.renderer.render(this.scene,this.camera)}},{key:"resize",value:function(e,t){var n=e/t;this.camera.aspect!==n&&(this.camera.aspect=n,this.camera.updateProjectionMatrix())}},{key:"dispose",value:function(){this.controls.dispose(),this.clearScene()}},{key:"makeDungeonVisual",value:function(e,t){this.clearScene();var n=this.createDungeonMesh(e,t);this.scene.add(n)}},{key:"clearScene",value:function(){for(var e=this.scene.children.length-1;e>=0;e--){var t=this.scene.children[e];if(t.name.includes("Dungeon")){for(var n=t.children.length-1;n>=0;n--){var o=t.children[n];if(o instanceof THREE.Mesh)o.material.dispose(),o.geometry.dispose();else for(var i=o.children.length-1;i>=0;i--){var r=o.children[i];r.material.dispose(),r.geometry.dispose(),r.parent.remove(r)}o.parent.remove(o)}t.parent.remove(t)}}}}]),e}();t["default"]=v},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(4),s=o(a);window.THREE=THREE,n(5),n(6);var c=n(7),d=n(8)(),l=new Event("disableWalker"),u={height:1.6,moveForward:!1,moveLeft:!1,moveBackward:!1,moveRight:!1,speedModifier:1,shiftSpeedModifier:2,jump:!1,isJumping:!1,moveForwardBackMultiplier:1,moveLeftRightMultiplier:.9,mobileRotateHorizontalMult:2,mobileRotateVerticalMult:1.6,velocity:new THREE.Vector3(0,0,0),raycaster:new THREE.Raycaster(new THREE.Vector3,new THREE.Vector3(0,(-1),0),0,10),walkingSpeed:65,jumpStrength:8,gravity:30},h=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Vector3,f=function(e){switch(e.keyCode){case 38:case 87:u.moveForward=!0;break;case 37:case 65:u.moveLeft=!0;break;case 40:case 83:u.moveBackward=!0;break;case 39:case 68:u.moveRight=!0;break;case 16:u.speedModifier=u.shiftSpeedModifier;break;case 32:u.jump=!0}},v=function(e){switch(e.keyCode){case 38:case 87:u.moveForward=!1;break;case 37:case 65:u.moveLeft=!1;break;case 40:case 83:u.moveBackward=!1;break;case 39:case 68:u.moveRight=!1;break;case 16:u.speedModifier=1;break;case 32:u.jump=!1}},b=function(){function e(t,n,o){i(this,e),this.camera=t,this.domElement=n,this.walkerEnabled=!1,this.isDesktop=d.desktop(),this.orbitControls=new THREE.OrbitControls(t,n),this.orbitControls.enableDamping=!0,this.orbitControls.minDistance=1,this.orbitControls.maxDistance=1e3,this.orbitControls.rotateSpeed=.25,this.infoEl=document.createElement("div"),this.infoEl.className="buttonsRoot",this.infoEl.style.background="rgba(255,255,255,0.4)",this.isDesktop?this.infoEl.innerHTML="Controls: WASD / Space / Shift + mouse. Press Escape to exit.":(this.infoEl.style.width="70%",this.infoEl.style.right="0",this.infoEl.innerHTML="Controls: touch joystick to move, touch out of joystick to look around."),this.walkerControls=new THREE.PointerLockControls(t,n),this._controlsObject=this.walkerControls.getObject(),this._controlsObject.name="pointerLockObject",o.add(this._controlsObject),this._movTouchCos=0,this._movTouchSin=0,this._mobileLookLeftRight=0,this._mobileLookUpDown=0,this.resetCameraOrbit(),this.navMesh=new THREE.Group}return r(e,[{key:"enableWalker",value:function(e){this.createNavMesh(e.rooms,e.tunnels);var t=Math.floor(Math.random()*e.rooms.length);this.resetCameraWalker(),this._controlsObject.position.fromArray([e.rooms[t].x,6,e.rooms[t].y]),this._controlsObject.rotation.y=0,this._controlsObject.children[0].rotation.x=0,this.isDesktop?(this._addKeyboardListeners(),this._preparePointerLock()):(this._moveJoystickCont||this._initTouchJoystick(),document.body.appendChild(this._moveJoystickCont),document.body.appendChild(this._lookJoystickCont)),document.body.appendChild(this.infoEl),this.orbitControls.enabled=!1,this.walkerControls.enabled=!0}},{key:"disableWalker",value:function(){this.resetCameraOrbit(),this.isDesktop?(this._removeKeyboardListeners(),this._removePointerLock()):(document.body.removeChild(this._moveJoystickCont),document.body.removeChild(this._lookJoystickCont)),document.body.removeChild(this.infoEl),this.orbitControls.enabled=!0,this.walkerControls.enabled=!1,this.clearNavMesh(),document.dispatchEvent(l)}},{key:"resetCameraOrbit",value:function(){this.camera.position.fromArray(s["default"].camera.cameraPos),this.camera.lookAt(new THREE.Vector3(0,0,0)),this.camera.near=s["default"].camera.near,this.camera.far=s["default"].camera.far,this.camera.updateProjectionMatrix(),this._controlsObject.position.set(0,0,0),this._controlsObject.rotation.y=0,this._controlsObject.children[0].rotation.x=0}},{key:"resetCameraWalker",value:function(){this.camera.position.set(0,0,0),this.camera.rotation.set(0,0,0),this.camera.near=s["default"].camera.walkerNear,this.camera.far=s["default"].camera.walkerFar,this.camera.updateProjectionMatrix()}},{key:"update",value:function(e){if(this.orbitControls.enabled)this.orbitControls.update();else{var t=this._controlsObject;this.isDesktop||(t.rotation.y-=this._mobileLookLeftRight*u.mobileRotateHorizontalMult*e,t.children[0].rotation.x+=this._mobileLookUpDown*u.mobileRotateVerticalMult*e,t.children[0].rotation.x=Math.min(Math.max(t.children[0].rotation.x,-Math.PI/2),Math.PI/2));var n=void 0;u.raycaster.ray.origin.copy(t.position);var o=[];o=u.raycaster.intersectObjects(this.navMesh.children,!1);var i=o.length>0;u.velocity.x-=10*u.velocity.x*e,u.velocity.z-=10*u.velocity.z*e,u.velocity.y-=u.gravity*e,u.moveForward&&(u.velocity.z-=u.walkingSpeed*u.speedModifier*u.moveForwardBackMultiplier*e),u.moveBackward&&(u.velocity.z+=u.walkingSpeed*u.speedModifier*u.moveForwardBackMultiplier*e),u.moveLeft&&(u.velocity.x-=u.walkingSpeed*u.speedModifier*u.moveLeftRightMultiplier*e),u.moveRight&&(u.velocity.x+=u.walkingSpeed*u.speedModifier*u.moveLeftRightMultiplier*e),u.jump&&!u.isJumping&&(u.velocity.y=u.jumpStrength,u.isJumping=!0),i&&(n=o[0],n.distance+u.velocity.y*e<=u.height&&(t.position.y=o[0].point.y+u.height,u.velocity.y=0,u.isJumping=!1)),t.translateY(u.velocity.y*e);var r=t.position.clone();t.translateX(u.velocity.x*e),t.translateZ(u.velocity.z*e),u.raycaster.ray.origin.copy(t.position),o=[],o=u.raycaster.intersectObjects(this.navMesh.children,!1);var a=o.length>0;if(i&&!a){var s=t.position.clone(),c=n.object.geometry.attributes.position.array;h.fromArray(c,3*n.face.a).applyMatrix4(n.object.matrixWorld),p.fromArray(c,3*n.face.b).applyMatrix4(n.object.matrixWorld),m.fromArray(c,3*n.face.c).applyMatrix4(n.object.matrixWorld);var d=new THREE.Vector3(0).add(h).add(p).add(m).divideScalar(3),l=this._linesIntersectsXZ(h,p,r,s);if(l.intersect||(l=this._linesIntersectsXZ(p,m,r,s),l.intersect||(l=this._linesIntersectsXZ(h,m,r,s))),l.intersect){var f=l.A,v=l.B,b=(new THREE.Vector3).subVectors(v,f),y=(new THREE.Vector3).subVectors(t.position,f).projectOnVector(b);y.add(f),y.add((new THREE.Vector3).subVectors(d,y).divideScalar(1e3)),y.y=r.y,t.position.copy(y)}else t.position.copy(r);u.raycaster.ray.origin.copy(t.position),o=[],o=u.raycaster.intersectObjects(this.navMesh.children,!1),o.length<1&&t.position.copy(r)}}}},{key:"_linesIntersectsXZ",value:function(e,t,n,o){var i=new THREE.Vector2(t.x-e.x,t.z-e.z),r=new THREE.Vector2(o.x-n.x,o.z-n.z),a=(-i.y*(e.x-n.x)+i.x*(e.z-n.z))/(-r.x*i.y+i.x*r.y),s=(r.x*(e.z-n.z)-r.y*(e.x-n.x))/(-r.x*i.y+i.x*r.y),c=a>=0&&a<=1&&s>=0&&s<=1;return{intersect:c,A:e,B:t}}},{key:"createNavMesh",value:function(e,t){for(var n=this.navMesh,o=new THREE.BoxBufferGeometry(1,1,1),i=void 0,r=void 0,a=void 0,c=void 0,d=void 0,l=void 0,u=0;u<e.length;u++){var h=new THREE.Mesh(o);h.scale.set(e[u].w-.04,s["default"].visParams.floorHeight,e[u].h-.04),h.position.set(e[u].x,0,e[u].y),n.add(h)}for(var p=0;p<t.length;p+=4)i=new THREE.Mesh(o),r=t[p+2]-t[p]>t[p+3]-t[p+1],a=r?(t[p]+t[p+2])/2:t[p]+.5,d=r?t[p+2]-t[p]-.04:.96,c=r?t[p+1]+.5:(t[p+1]+t[p+3])/2,l=r?.96:t[p+3]-t[p+1]-.04,i.scale.set(d,s["default"].visParams.tunnelHeight,l),i.position.set(a,0,c),n.add(i);n.updateMatrixWorld(!0)}},{key:"clearNavMesh",value:function(){for(var e=this.navMesh.children.length-1;e>=0;e--)this.navMesh.children[e].geometry.dispose(),this.navMesh.remove(this.navMesh.children[e])}},{key:"_initTouchJoystick",value:function(){var e=this,t=document.createElement("div.moveJoystickCont");document.body.appendChild(t);var n=c.create({zone:t,mode:"static",position:{left:.08*this.domElement.width+"px",bottom:.08*this.domElement.width+"px"},size:.13*this.domElement.width,color:"#000000"});this._movementJoystick=n[0],this._movementJoystick.on("move",function(t,n){e._movTouchCos=Math.cos(n.angle.radian),e._movTouchSin=Math.sin(n.angle.radian),u.moveForward=e._movTouchSin>0,u.moveBackward=!u.moveForward,u.moveRight=e._movTouchCos>0,u.moveLeft=!u.moveBackward,u.moveForwardBackMultiplier=Math.abs(e._movTouchSin)*Math.min(n.force,2.5),u.moveLeftRightMultiplier=Math.abs(e._movTouchCos)*Math.min(n.force,2.5)}),this._movementJoystick.on("end",function(){u.moveForward=!1,u.moveBackward=!1,u.moveRight=!1,u.moveLeft=!1}),this._moveJoystickCont=t;var o=document.createElement("div.lookJoystickCont");o.style.height="90%",o.style.position="absolute",o.style.width="100%",o.style.bottom="0",o.style.right="0",o.style.zIndex=0;var i=c.create({zone:o,mode:"dynamic",size:.13*this.domElement.width,position:{right:.08*this.domElement.width+"px",bottom:.08*this.domElement.width+"px"},maxNumberOfNipples:1,multitouch:!1,dataOnly:!0});i.on("added",function(t,n){n.on("move",function(t,n){e._mobileLookLeftRight=Math.cos(n.angle.radian)*Math.min(n.force,2.5),e._mobileLookUpDown=Math.sin(n.angle.radian)*Math.min(n.force,2.5)}),n.on("end",function(){e._mobileLookLeftRight=0,e._mobileLookUpDown=0})}).on("removed",function(e,t){t.off("start move dir plain end")}),this._lookJoystickCont=o}},{key:"_pointerlockchange",value:function(){var e=document.body;document.pointerLockElement===e||document.mozPointerLockElement===e||document.webkitPointerLockElement===e||this.disableWalker()}},{key:"_pointerlockerror",value:function(){var e=document.body;e.innerHTML="PointerLock Error"}},{key:"_preparePointerLock",value:function(){var e=document.body;"pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document?(document.addEventListener("pointerlockchange",this._pointerlockchange.bind(this),!1),document.addEventListener("mozpointerlockchange",this._pointerlockchange.bind(this),!1),document.addEventListener("webkitpointerlockchange",this._pointerlockchange.bind(this),!1),document.addEventListener("pointerlockerror",this._pointerlockerror,!1),document.addEventListener("mozpointerlockerror",this._pointerlockerror,!1),document.addEventListener("webkitpointerlockerror",this._pointerlockerror,!1),e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()):e.innerHTML="Bad browser; No pointer lock"}},{key:"_removePointerLock",value:function(){document.removeEventListener("pointerlockchange",this._pointerlockchange.bind(this),!1),document.removeEventListener("mozpointerlockchange",this._pointerlockchange.bind(this),!1),document.removeEventListener("webkitpointerlockchange",this._pointerlockchange.bind(this),!1),document.removeEventListener("pointerlockerror",this._pointerlockerror,!1),document.removeEventListener("mozpointerlockerror",this._pointerlockerror,!1),document.removeEventListener("webkitpointerlockerror",this._pointerlockerror,!1)}},{key:"_addKeyboardListeners",value:function(){document.addEventListener("keydown",f,!1),document.addEventListener("keyup",v,!1)}},{key:"_removeKeyboardListeners",value:function(){document.removeEventListener("keydown",f,!1),document.removeEventListener("keyup",v,!1)}},{key:"dispose",value:function(){this.orbitControls.dispose(),this.walkerControls.dispose()}}]),e}();t["default"]=b},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={global:{repoUrl:"https://github.com/mlknz/Dungeonizer.js"},generationMode:{withWalls:!0,isDebug:!1},dungeonParams:{roomSizeDistribution:"normal",dungeonSize:10,roomSizeMean:9,roomSizeDeviation:.75,mainRoomThreshold:1.1,connectivity:.7,density:.6,fromDungeonId:!1,dungeonId:""},camera:{cameraPos:[-90,110,50],near:1,far:1400,walkerNear:.005,walkerFar:100},visParams:{floorHeight:1,tunnelHeight:1,wallHeight:4,floorTunnelColor:[1,1,1],wallColor:[.6,.6,.6],mainFloorDebugColor:[.6,.1,.1],attachedFloorDebugColor:[.1,.4,.04],trashFloorDebugColor:[.3,.3,.3],trashFloorY:-.9,tunnelDebugHeight:1.2,tunnelDebugColor:[.7,.7,.7]}};t["default"]=n},function(e,t){THREE.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*L.autoRotateSpeed}function o(){return Math.pow(.95,L.zoomSpeed)}function i(e){B.theta-=e}function r(e){B.phi-=e}function a(e){L.object instanceof THREE.PerspectiveCamera?U/=e:L.object instanceof THREE.OrthographicCamera?(L.object.zoom=Math.max(L.minZoom,Math.min(L.maxZoom,L.object.zoom*e)),L.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),L.enableZoom=!1)}function s(e){L.object instanceof THREE.PerspectiveCamera?U*=e:L.object instanceof THREE.OrthographicCamera?(L.object.zoom=Math.max(L.minZoom,Math.min(L.maxZoom,L.object.zoom/e)),L.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),L.enableZoom=!1)}function c(e){Y.set(e.clientX,e.clientY)}function d(e){K.set(e.clientX,e.clientY)}function l(e){X.set(e.clientX,e.clientY)}function u(e){Z.set(e.clientX,e.clientY),G.subVectors(Z,Y);var t=L.domElement===document?L.domElement.body:L.domElement;i(2*Math.PI*G.x/t.clientWidth*L.rotateSpeed),r(2*Math.PI*G.y/t.clientHeight*L.rotateSpeed),Y.copy(Z),L.update()}function h(e){Q.set(e.clientX,e.clientY),$.subVectors(Q,K),$.y>0?a(o()):$.y<0&&s(o()),K.copy(Q),L.update()}function p(e){J.set(e.clientX,e.clientY),q.subVectors(J,X),ne(q.x,q.y),X.copy(J),L.update()}function m(e){}function f(e){e.deltaY<0?s(o()):e.deltaY>0&&a(o()),L.update()}function v(e){switch(e.keyCode){case L.keys.UP:ne(0,L.keyPanSpeed),L.update();break;case L.keys.BOTTOM:ne(0,-L.keyPanSpeed),L.update();break;case L.keys.LEFT:ne(L.keyPanSpeed,0),L.update();break;case L.keys.RIGHT:ne(-L.keyPanSpeed,0),L.update()}}function b(e){Y.set(e.touches[0].pageX,e.touches[0].pageY)}function y(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);K.set(0,o)}function g(e){X.set(e.touches[0].pageX,e.touches[0].pageY)}function E(e){Z.set(e.touches[0].pageX,e.touches[0].pageY),G.subVectors(Z,Y);var t=L.domElement===document?L.domElement.body:L.domElement;i(2*Math.PI*G.x/t.clientWidth*L.rotateSpeed),r(2*Math.PI*G.y/t.clientHeight*L.rotateSpeed),Y.copy(Z),L.update()}function w(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);Q.set(0,i),$.subVectors(Q,K),$.y>0?s(o()):$.y<0&&a(o()),K.copy(Q),L.update()}function k(e){J.set(e.touches[0].pageX,e.touches[0].pageY),q.subVectors(J,X),ne(q.x,q.y),X.copy(J),L.update()}function x(e){}function T(e){if(L.enabled!==!1){if(e.preventDefault(),e.button===L.mouseButtons.ORBIT){if(L.enableRotate===!1)return;c(e),N=I.ROTATE}else if(e.button===L.mouseButtons.ZOOM){if(L.enableZoom===!1)return;d(e),N=I.DOLLY}else if(e.button===L.mouseButtons.PAN){if(L.enablePan===!1)return;l(e),N=I.PAN}N!==I.NONE&&(document.addEventListener("mousemove",R,!1),document.addEventListener("mouseup",_,!1),L.dispatchEvent(S))}}function R(e){if(L.enabled!==!1)if(e.preventDefault(),N===I.ROTATE){if(L.enableRotate===!1)return;u(e)}else if(N===I.DOLLY){if(L.enableZoom===!1)return;h(e)}else if(N===I.PAN){if(L.enablePan===!1)return;p(e)}}function _(e){L.enabled!==!1&&(m(e),document.removeEventListener("mousemove",R,!1),document.removeEventListener("mouseup",_,!1),L.dispatchEvent(j),N=I.NONE)}function M(e){L.enabled===!1||L.enableZoom===!1||N!==I.NONE&&N!==I.ROTATE||(e.preventDefault(),e.stopPropagation(),f(e),L.dispatchEvent(S),L.dispatchEvent(j))}function O(e){L.enabled!==!1&&L.enableKeys!==!1&&L.enablePan!==!1&&v(e)}function P(e){if(L.enabled!==!1){switch(e.touches.length){case 1:if(L.enableRotate===!1)return;b(e),N=I.TOUCH_ROTATE;break;case 2:if(L.enableZoom===!1)return;y(e),N=I.TOUCH_DOLLY;break;case 3:if(L.enablePan===!1)return;g(e),N=I.TOUCH_PAN;break;default:N=I.NONE}N!==I.NONE&&L.dispatchEvent(S)}}function C(e){if(L.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(L.enableRotate===!1)return;if(N!==I.TOUCH_ROTATE)return;E(e);break;case 2:if(L.enableZoom===!1)return;if(N!==I.TOUCH_DOLLY)return;w(e);break;case 3:if(L.enablePan===!1)return;if(N!==I.TOUCH_PAN)return;k(e);break;default:N=I.NONE}}function H(e){L.enabled!==!1&&(x(e),L.dispatchEvent(j),N=I.NONE)}function D(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return F.phi},this.getAzimuthalAngle=function(){return F.theta},this.reset=function(){L.target.copy(L.target0),L.object.position.copy(L.position0),L.object.zoom=L.zoom0,L.object.updateProjectionMatrix(),L.dispatchEvent(z),L.update(),N=I.NONE},this.update=function(){var t=new THREE.Vector3,o=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),r=o.clone().inverse(),a=new THREE.Vector3,s=new THREE.Quaternion;return function(){var e=L.object.position;return t.copy(e).sub(L.target),t.applyQuaternion(o),F.setFromVector3(t),L.autoRotate&&N===I.NONE&&i(n()),F.theta+=B.theta,F.phi+=B.phi,F.theta=Math.max(L.minAzimuthAngle,Math.min(L.maxAzimuthAngle,F.theta)),F.phi=Math.max(L.minPolarAngle,Math.min(L.maxPolarAngle,F.phi)),F.makeSafe(),F.radius*=U,F.radius=Math.max(L.minDistance,Math.min(L.maxDistance,F.radius)),L.target.add(V),t.setFromSpherical(F),t.applyQuaternion(r),e.copy(L.target).add(t),L.object.lookAt(L.target),L.enableDamping===!0?(B.theta*=1-L.dampingFactor,B.phi*=1-L.dampingFactor):B.set(0,0,0),U=1,V.set(0,0,0),!!(W||a.distanceToSquared(L.object.position)>A||8*(1-s.dot(L.object.quaternion))>A)&&(L.dispatchEvent(z),a.copy(L.object.position),s.copy(L.object.quaternion),W=!1,!0)}}(),this.dispose=function(){L.domElement.removeEventListener("contextmenu",D,!1),L.domElement.removeEventListener("mousedown",T,!1),L.domElement.removeEventListener("wheel",M,!1),L.domElement.removeEventListener("touchstart",P,!1),L.domElement.removeEventListener("touchend",H,!1),L.domElement.removeEventListener("touchmove",C,!1),document.removeEventListener("mousemove",R,!1),document.removeEventListener("mouseup",_,!1),window.removeEventListener("keydown",O,!1)};var L=this,z={type:"change"},S={type:"start"},j={type:"end"},I={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},N=I.NONE,A=1e-6,F=new THREE.Spherical,B=new THREE.Spherical,U=1,V=new THREE.Vector3,W=!1,Y=new THREE.Vector2,Z=new THREE.Vector2,G=new THREE.Vector2,X=new THREE.Vector2,J=new THREE.Vector2,q=new THREE.Vector2,K=new THREE.Vector2,Q=new THREE.Vector2,$=new THREE.Vector2,ee=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),V.add(e)}}(),te=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),V.add(e)}}(),ne=function(){var e=new THREE.Vector3;return function(t,n){var o=L.domElement===document?L.domElement.body:L.domElement;if(L.object instanceof THREE.PerspectiveCamera){var i=L.object.position;e.copy(i).sub(L.target);var r=e.length();r*=Math.tan(L.object.fov/2*Math.PI/180),ee(2*t*r/o.clientHeight,L.object.matrix),te(2*n*r/o.clientHeight,L.object.matrix)}else L.object instanceof THREE.OrthographicCamera?(ee(t*(L.object.right-L.object.left)/L.object.zoom/o.clientWidth,L.object.matrix),te(n*(L.object.top-L.object.bottom)/L.object.zoom/o.clientHeight,L.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),L.enablePan=!1)}}();L.domElement.addEventListener("contextmenu",D,!1),L.domElement.addEventListener("mousedown",T,!1),L.domElement.addEventListener("wheel",M,!1),L.domElement.addEventListener("touchstart",P,!1),L.domElement.addEventListener("touchend",H,!1),L.domElement.addEventListener("touchmove",C,!1),window.addEventListener("keydown",O,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})},function(e,t){THREE.PointerLockControls=function(e){var t=this;e.rotation.set(0,0,0);var n=new THREE.Object3D;n.add(e);var o=new THREE.Object3D;o.position.y=10,o.add(n);var i=Math.PI/2,r=function(e){if(t.enabled!==!1){var r=e.movementX||e.mozMovementX||e.webkitMovementX||0,a=e.movementY||e.mozMovementY||e.webkitMovementY||0;o.rotation.y-=.002*r,n.rotation.x-=.002*a,n.rotation.x=Math.max(-i,Math.min(i,n.rotation.x))}};this.dispose=function(){document.removeEventListener("mousemove",r,!1)},document.addEventListener("mousemove",r,!1),this.enabled=!1,this.getObject=function(){return o},this.getDirection=function(){var e=new THREE.Vector3(0,0,(-1)),t=new THREE.Euler(0,0,0,"YXZ");return function(i){return t.set(n.rotation.x,o.rotation.y,0),i.copy(e).applyEuler(t),i}}()}},function(e,t,n){!function(t){e.exports=t()}(function(){function e(){}function t(e,n){return this.identifier=n.identifier,this.position=n.position,this.frontPosition=n.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5,mode:"dynamic",zone:document.body},this.config(n),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=t.id,t.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function n(e,t){var o=this;return o.nipples=[],o.idles=[],o.actives=[],o.ids=[],o.pressureIntervals={},o.manager=e,o.id=n.id,n.id+=1,o.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5},o.config(t),"static"!==o.options.mode&&"semi"!==o.options.mode||(o.options.multitouch=!1),o.options.multitouch||(o.options.maxNumberOfNipples=1),o.updateBox(),o.prepareNipples(),o.bindings(),o.begin(),o.nipples}function o(e){var t=this;t.ids={},t.index=0,t.collections=[],t.config(e),t.prepareCollections();var n;return l.bindEvt(window,"resize",function(e){clearTimeout(n),n=setTimeout(function(){var e,n=l.getScroll();t.collections.forEach(function(t){t.forEach(function(t){e=t.el.getBoundingClientRect(),t.position={x:n.x+e.left,y:n.y+e.top}})})},100)}),t.collections}var i,r=!!("ontouchstart"in window),a=!!window.PointerEvent,s=!!window.MSPointerEvent,c={touch:{start:"touchstart",move:"touchmove",end:"touchend"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},d={};a?i=c.pointer:s?i=c.MSPointer:r?(i=c.touch,d=c.mouse):i=c.mouse;var l={};l.distance=function(e,t){var n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)},l.angle=function(e,t){var n=t.x-e.x,o=t.y-e.y;return l.degrees(Math.atan2(o,n))},l.findCoord=function(e,t,n){var o={x:0,y:0};return n=l.radians(n),o.x=e.x-t*Math.cos(n),o.y=e.y-t*Math.sin(n),o},l.radians=function(e){return e*(Math.PI/180)},l.degrees=function(e){return e*(180/Math.PI)},l.bindEvt=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent(t,n)},l.unbindEvt=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent(t,n)},l.trigger=function(e,t,n){var o=new CustomEvent(t,n);e.dispatchEvent(o)},l.prepareEvent=function(e){return e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e},l.getScroll=function(){var e=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},l.applyPosition=function(e,t){t.x&&t.y?(e.style.left=t.x+"px",e.style.top=t.y+"px"):(t.top||t.right||t.bottom||t.left)&&(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left)},l.getTransitionStyle=function(e,t,n){var o=l.configStylePropertyObject(e);for(var i in o)if(o.hasOwnProperty(i))if("string"==typeof t)o[i]=t+" "+n;else{for(var r="",a=0,s=t.length;a<s;a+=1)r+=t[a]+" "+n+", ";o[i]=r.slice(0,-2)}return o},l.getVendorStyle=function(e,t){var n=l.configStylePropertyObject(e);for(var o in n)n.hasOwnProperty(o)&&(n[o]=t);return n},l.configStylePropertyObject=function(e){var t={};t[e]="";var n=["webkit","Moz","o"];return n.forEach(function(n){t[n+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},l.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},l.safeExtend=function(e,t){var n={};for(var o in e)e.hasOwnProperty(o)&&t.hasOwnProperty(o)?n[o]=t[o]:e.hasOwnProperty(o)&&(n[o]=e[o]);return n},l.map=function(e,t){if(e.length)for(var n=0,o=e.length;n<o;n+=1)t(e[n]);else t(e)},e.prototype.on=function(e,t){var n,o=this,i=e.split(/[ ,]+/g);
o._handlers_=o._handlers_||{};for(var r=0;r<i.length;r+=1)n=i[r],o._handlers_[n]=o._handlers_[n]||[],o._handlers_[n].push(t);return o},e.prototype.off=function(e,t){var n=this;return n._handlers_=n._handlers_||{},void 0===e?n._handlers_={}:void 0===t?n._handlers_[e]=null:n._handlers_[e]&&n._handlers_[e].indexOf(t)>=0&&n._handlers_[e].splice(n._handlers_[e].indexOf(t),1),n},e.prototype.trigger=function(e,t){var n,o=this,i=e.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var r=0;r<i.length;r+=1)n=i[r],o._handlers_[n]&&o._handlers_[n].length&&o._handlers_[n].forEach(function(e){e.call(o,{type:n,target:o},t)})},e.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=l.safeExtend(t.options,e))},e.prototype.bindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[t]=function(){"function"==typeof n["on"+t]?n["on"+t].apply(n,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},l.bindEvt(e,i[t],n._domHandlers_[t]),d[t]&&l.bindEvt(e,d[t],n._domHandlers_[t]),n},e.prototype.unbindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},l.unbindEvt(e,i[t],n._domHandlers_[t]),d[t]&&l.unbindEvt(e,d[t],n._domHandlers_[t]),delete n._domHandlers_[t],this},t.prototype=new e,t.constructor=t,t.id=0,t.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},t.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=l.getVendorStyle("borderRadius","50%"),n=l.getTransitionStyle("transition","opacity",e),o={};return o.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},o.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},o.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},l.extend(o.el,n),l.extend(o.back,t),l.extend(o.front,t),this.applyStyles(o),this},t.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var n in e[t])this.ui[t].style[n]=e[t][n];return this},t.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},t.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},t.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},t.prototype.show=function(e){var t=this;return t.options.dataOnly?t:(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),"function"==typeof e&&e.call(this)},t.options.fadeTime),t)},t.prototype.hide=function(e){var t=this;return t.options.dataOnly?t:(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var n="dynamic"===t.options.mode?"none":"block";t.ui.el.style.display=n,"function"==typeof e&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.restPosition(),t)},t.prototype.restPosition=function(e){var t=this;t.frontPosition={x:0,y:0};var n=t.options.fadeTime+"ms",o={};o.front=l.getTransitionStyle("transition",["top","left"],n);var i={front:{}};i.front={left:t.frontPosition.x+"px",top:t.frontPosition.y+"px"},t.applyStyles(o),t.applyStyles(i),t.restTimeout=setTimeout(function(){"function"==typeof e&&e.call(t),t.restCallback()},t.options.fadeTime)},t.prototype.restCallback=function(){var e=this,t={};t.front=l.getTransitionStyle("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)},t.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},t.prototype.computeDirection=function(e){var t,n,o,i=e.angle.radian,r=Math.PI/4,a=Math.PI/2;if(t=i>r&&i<3*r?"up":i>-r&&i<=r?"left":i>3*-r&&i<=-r?"down":"right",n=i>-a&&i<a?"left":"right",o=i>0?"up":"down",e.force>this.options.threshold){var s={};for(var c in this.direction)this.direction.hasOwnProperty(c)&&(s[c]=this.direction[c]);var d={};this.direction={x:n,y:o,angle:t},e.direction=this.direction;for(var c in s)s[c]===this.direction[c]&&(d[c]=!0);if(d.x&&d.y&&d.angle)return e;d.x&&d.y||this.trigger("plain",e),d.x||this.trigger("plain:"+n,e),d.y||this.trigger("plain:"+o,e),d.angle||this.trigger("dir dir:"+t,e)}return e},n.prototype=new e,n.constructor=n,n.id=0,n.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(e){if(void 0===e)return t[0];for(var n=0,o=t.length;n<o;n+=1)if(t[n].identifier===e)return t[n];return!1}},n.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"},n.prototype.begin=function(){var e=this,t=e.options;if("static"===t.mode){var n=e.createNipple(t.position,e.manager.getIdentifier());n.add(),e.idles.push(n)}},n.prototype.createNipple=function(e,n){var o=this,i=l.getScroll(),r={},a=o.options;if(e.x&&e.y)r={x:e.x-(i.x+o.box.left),y:e.y-(i.y+o.box.top)};else if(e.top||e.right||e.bottom||e.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=e.top,s.style.right=e.right,s.style.bottom=e.bottom,s.style.left=e.left,s.style.position="absolute",a.zone.appendChild(s);var c=s.getBoundingClientRect();a.zone.removeChild(s),r=e,e={x:c.left+i.x,y:c.top+i.y}}var d=new t(o,{color:a.color,size:a.size,threshold:a.threshold,fadeTime:a.fadeTime,dataOnly:a.dataOnly,restOpacity:a.restOpacity,mode:a.mode,identifier:n,position:e,zone:a.zone,frontPosition:{x:0,y:0}});return a.dataOnly||(l.applyPosition(d.ui.el,r),l.applyPosition(d.ui.front,d.frontPosition)),o.nipples.push(d),o.trigger("added "+d.identifier+":added",d),o.manager.trigger("added "+d.identifier+":added",d),o.bindNipple(d),d},n.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()},n.prototype.bindNipple=function(e){var t,n=this,o=function(e,o){t=e.type+" "+o.id+":"+e.type,n.trigger(t,o)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",o),e.on("dir:up dir:right dir:down dir:left",o),e.on("plain:up plain:right plain:down plain:left",o)},n.prototype.pressureFn=function(e,t,n){var o=this,i=0;clearInterval(o.pressureIntervals[n]),o.pressureIntervals[n]=setInterval(function(){var n=e.force||e.pressure||e.webkitForce||0;n!==i&&(t.trigger("pressure",n),o.trigger("pressure "+t.identifier+":pressure",n),i=n)}.bind(o),100)},n.prototype.onstart=function(e){var t=this,n=t.options;e=l.prepareEvent(e),t.updateBox();var o=function(e){t.actives.length<n.maxNumberOfNipples&&t.processOnStart(e)};return l.map(e,o),t.manager.bindDocument(),!1},n.prototype.processOnStart=function(e){var t,n=this,o=n.options,i=n.manager.getIdentifier(e),r=e.force||e.pressure||e.webkitForce||0,a={x:e.pageX,y:e.pageY},s=n.getOrCreate(i,a);s.identifier=i;var c=function(t){t.trigger("start",t),n.trigger("start "+t.id+":start",t),t.show(),r>0&&n.pressureFn(e,t,t.identifier),n.processOnMove(e)};if((t=n.idles.indexOf(s))>=0&&n.idles.splice(t,1),n.actives.push(s),n.ids.push(s.identifier),"semi"!==o.mode)c(s);else{var d=l.distance(a,s.position);if(!(d<=o.catchDistance))return s.destroy(),void n.processOnStart(e);c(s)}return s},n.prototype.getOrCreate=function(e,t){var n,o=this,i=o.options;return/(semi|static)/.test(i.mode)?(n=o.idles[0])?(o.idles.splice(0,1),n):"semi"===i.mode?o.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1):n=o.createNipple(t,e)},n.prototype.processOnMove=function(e){var t=this,n=t.options,o=t.manager.getIdentifier(e),i=t.nipples.get(o);if(!i)return console.error("Found zombie joystick with ID "+o),void t.manager.removeIdentifier(o);i.identifier=o;var r=i.options.size/2,a={x:e.pageX,y:e.pageY},s=l.distance(a,i.position),c=l.angle(a,i.position),d=l.radians(c),u=s/r;s>r&&(s=r,a=l.findCoord(i.position,s,c)),i.frontPosition={x:a.x-i.position.x,y:a.y-i.position.y},n.dataOnly||l.applyPosition(i.ui.front,i.frontPosition);var h={identifier:i.identifier,position:a,force:u,pressure:e.force||e.pressure||e.webkitForce||0,distance:s,angle:{radian:d,degree:c},instance:i};h=i.computeDirection(h),h.angle={radian:l.radians(180-c),degree:180-c},i.trigger("move",h),t.trigger("move "+i.id+":move",h)},n.prototype.processOnEnd=function(e){var t=this,n=t.options,o=t.manager.getIdentifier(e),i=t.nipples.get(o),r=t.manager.removeIdentifier(i.identifier);i&&(n.dataOnly||i.hide(function(){"dynamic"===n.mode&&(i.trigger("removed",i),t.trigger("removed "+i.id+":removed",i),t.manager.trigger("removed "+i.id+":removed",i),i.destroy())}),clearInterval(t.pressureIntervals[i.identifier]),i.resetDirection(),i.trigger("end",i),t.trigger("end "+i.id+":end",i),t.ids.indexOf(i.identifier)>=0&&t.ids.splice(t.ids.indexOf(i.identifier),1),t.actives.indexOf(i)>=0&&t.actives.splice(t.actives.indexOf(i),1),/(semi|static)/.test(n.mode)?t.idles.push(i):t.nipples.indexOf(i)>=0&&t.nipples.splice(t.nipples.indexOf(i),1),t.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(t.manager.ids[r.id]=r.identifier))},n.prototype.onDestroyed=function(e,t){var n=this;n.nipples.indexOf(t)>=0&&n.nipples.splice(n.nipples.indexOf(t),1),n.actives.indexOf(t)>=0&&n.actives.splice(n.actives.indexOf(t),1),n.idles.indexOf(t)>=0&&n.idles.splice(n.idles.indexOf(t),1),n.ids.indexOf(t.identifier)>=0&&n.ids.splice(n.ids.indexOf(t.identifier),1),n.manager.removeIdentifier(t.identifier),n.manager.unbindDocument()},n.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(e){e.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()},o.prototype=new e,o.constructor=o,o.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var n;return e.collections.every(function(e){return!(n=e.get(t))}),n}},o.prototype.create=function(e){return this.createCollection(e)},o.prototype.createCollection=function(e){var t=this,o=new n(t,e);return t.bindCollection(o),t.collections.push(o),o},o.prototype.bindCollection=function(e){var t,n=this,o=function(e,o){t=e.type+" "+o.id+":"+e.type,n.trigger(t,o)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",o),e.on("dir:up dir:right dir:down dir:left",o),e.on("plain:up plain:right plain:down plain:left",o)},o.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)},o.prototype.unbindDocument=function(e){var t=this;Object.keys(t.ids).length&&e!==!0||(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)},o.prototype.getIdentifier=function(e){var t;return e?(t=void 0===e.identifier?e.pointerId:e.identifier,void 0===t&&(t=this.latest||0)):t=this.index,void 0===this.ids[t]&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]},o.prototype.removeIdentifier=function(e){var t={};for(var n in this.ids)if(this.ids[n]===e){t.id=n,t.identifier=this.ids[n],delete this.ids[n];break}return t},o.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1},o.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1},o.prototype.onAny=function(e,t){var n,o=this,i="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=l.prepareEvent(t);var r=function(e,t,n){n.ids.indexOf(t)>=0&&(n[i](e),e._found_=!0)},a=function(e){n=o.getIdentifier(e),l.map(o.collections,r.bind(null,e,n)),e._found_||o.removeIdentifier(n)};return l.map(t,a),!1},o.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(e){e.destroy()}),e.off()},o.prototype.onDestroyed=function(e,t){var n=this;return!(n.collections.indexOf(t)<0)&&void n.collections.splice(n.collections.indexOf(t),1)};var u=new o;return{create:function(e){return u.create(e)},factory:u}})},function(e,t,n){var o,i;!function(t){"use strict";var n=function(e,t){function n(t){return e.indexOf(t)!==-1}function o(e){var t;return t=new RegExp(e,"i"),c.className.match(t)}function i(e){o(e)||(c.className+=" "+e)}function r(e){o(e)&&(c.className=c.className.replace(e,""))}function a(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var s={},c=t||window.document.documentElement;e=(e||window.navigator.userAgent).toLowerCase(),s.ios=function(){return s.iphone()||s.ipod()||s.ipad()},s.iphone=function(){return n("iphone")},s.ipod=function(){return n("ipod")},s.ipad=function(){return n("ipad")},s.android=function(){return n("android")},s.androidPhone=function(){return s.android()&&n("mobile")},s.androidTablet=function(){return s.android()&&!n("mobile")},s.blackberry=function(){return n("blackberry")||n("bb10")||n("rim")},s.blackberryPhone=function(){return s.blackberry()&&!n("tablet")},s.blackberryTablet=function(){return s.blackberry()&&n("tablet")},s.windows=function(){return n("windows")},s.windowsPhone=function(){return s.windows()&&n("phone")},s.windowsTablet=function(){return s.windows()&&n("touch")&&!s.windowsPhone()},s.fxos=function(){return(n("(mobile;")||n("(tablet;"))&&n("; rv:")},s.fxosPhone=function(){return s.fxos()&&n("mobile")},s.fxosTablet=function(){return s.fxos()&&n("tablet")},s.meego=function(){return n("meego")},s.cordova=function(){return window.cordova&&"file:"===location.protocol},s.nodeWebkit=function(){return"object"==typeof window.process},s.bada=function(){return n("bada")},s.mobile=function(){return s.androidPhone()||s.iphone()||s.ipod()||s.windowsPhone()||s.blackberryPhone()||s.fxosPhone()||s.meego()},s.tablet=function(){return s.ipad()||s.androidTablet()||s.blackberryTablet()||s.windowsTablet()||s.fxosTablet()},s.desktop=function(){return!s.tablet()&&!s.mobile()},s.portrait=function(){return window.innerHeight/window.innerWidth>1},s.landscape=function(){return window.innerHeight/window.innerWidth<1},s.standAlone=function(){return window.navigator.standalone===!0},s.addClasses=function(){s._hasAddClasses||(s._hasAddClasses=!0,s.ios()?s.ipad()?i("ios ipad tablet"):s.iphone()?i("ios iphone mobile"):s.ipod()&&i("ios ipod mobile"):i(s.android()?s.androidTablet()?"android tablet":"android mobile":s.blackberry()?s.blackberryTablet()?"blackberry tablet":"blackberry mobile":s.windows()?s.windowsTablet()?"windows tablet":s.windowsPhone()?"windows mobile":"desktop":s.fxos()?s.fxosTablet()?"fxos tablet":"fxos mobile":s.meego()?"meego mobile":s.nodeWebkit()?"node-webkit":"desktop"),s.cordova()&&i("cordova"),s.standAlone()&&i("standalone"))};var d="";return s.ios()?(d=a(/os (\d+([_\s]\d+)*) like mac os x/i),d=d.replace(/[_\s]/g,".")):s.android()?d=a(/android[ \/-](\d+(\.\d+)*)/i):s.windowsPhone()?d=a(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):s.blackberry()?d=a(/rim\stablet\sos\s(\d+(\.\d+)*)/i):s.bada()&&(d=a(/bada\/(\d+(\.\d+)*)/i)),d&&(s.osversion=d),s.addOrientationClasses=function(){if(!s.hasOrientationListener){s.hasOrientationListener=!0;var e=function(){return s.landscape()?(r("portrait"),i("landscape")):(r("landscape"),i("portrait"))},t="onorientationchange"in window?"orientationchange":"resize";window.addEventListener?window.addEventListener(t,e,!1):window.attachEvent?window.attachEvent(t,e):window[t]=e,e()}},s};"undefined"!=typeof e&&e.exports?e.exports=n:(o=[],i=function(){return n}.apply(t,o),!(void 0!==i&&(e.exports=i)))}(this)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),a=o(r),s=n(11),c=o(s),d=function l(e,t){var n=t.isDebug,o=t.isTrashFloors,r=t.config;i(this,l);for(var s=[],d=[],u=[],h=n?r.mainFloorDebugColor:r.floorTunnelColor,p=r.attachedFloorDebugColor,m=r.trashFloorDebugColor,f=o?r.trashFloorY:0,v=0;v<e.length;v++)s.push(e[v].x,f,e[v].y),d.push(e[v].w,r.floorHeight,e[v].h),u.push.apply(u,o?m:e[v].isAttached?p:h);var b=new THREE.BoxBufferGeometry(1,1,1),y=new THREE.InstancedBufferGeometry;y.addAttribute("position",b.attributes.position),y.addAttribute("normal",b.attributes.normal),y.addAttribute("uv",b.attributes.uv),y.setIndex(b.index),y.addAttribute("offset",new THREE.InstancedBufferAttribute(new Float32Array(s),3,1)),y.addAttribute("scale",new THREE.InstancedBufferAttribute(new Float32Array(d),3,1)),y.addAttribute("color",new THREE.InstancedBufferAttribute(new Float32Array(u),3,1));var g=THREE.UniformsUtils.clone(THREE.UniformsLib.lights);g.opacity={value:o?.5:1},g.isDebug={value:n?1:0};var E=new THREE.RawShaderMaterial({uniforms:g,vertexShader:a["default"],fragmentShader:c["default"],side:THREE.FrontSide,transparent:!!o,lights:!0}),w=new THREE.Mesh(y,E);return w.name="floors_isTrash:"+o+"_isDebug:"+n,w};t["default"]=d},function(e,t){e.exports="attribute vec3 position;\r\nattribute vec3 normal;\r\nattribute vec2 uv;\r\n\r\nattribute vec3 offset;\r\nattribute vec3 scale;\r\nattribute vec3 color;\r\n\r\nuniform mat4 viewMatrix;\r\nuniform mat4 projectionMatrix;\r\n\r\nvarying vec3 vNormal;\r\nvarying vec3 vColor;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n    mat4 modelMat = mat4(\r\n        scale.x, 0., 0., 0.,\r\n        0., scale.y, 0., 0.,\r\n        0., 0., scale.z, 0.,\r\n        offset.x, offset.y, offset.z, 1.\r\n    );\r\n\tgl_Position = projectionMatrix * viewMatrix * modelMat * vec4(position, 1.);\r\n\r\n\tvNormal = mat3(viewMatrix * modelMat) * normal;\r\n\tvColor = color;\r\n    vUv = uv * vec2(scale.x, scale.z);\r\n}\r\n"},function(e,t){e.exports="precision mediump float;\r\nvarying vec3 vNormal;\r\nvarying vec3 vColor;\r\nvarying vec2 vUv;\r\n\r\n#include <common>\r\n#include <lights_pars>\r\n\r\nuniform float opacity;\r\nuniform float isDebug;\r\n\r\nvoid main() {\r\n\r\n    vec2 uv = mod(vUv, 1.) - 0.5;\r\n    float d = clamp(uv.x * uv.x + uv.y * uv.y, 0., 1.);\r\n\tvec3 c = vColor * (isDebug > 0.5 ? 1. : d * d);\r\n\r\n    #if NUM_DIR_LIGHTS > 0\r\n    vec3 light;\r\n\tfor (int i = 0; i < NUM_DIR_LIGHTS; i++) {\r\n\t\tlight = max( dot(normalize(vNormal), directionalLights[i].direction), 0.0) * directionalLights[i].color * 0.5;\r\n\t\tc += light;\r\n\t}\r\n\t#endif\r\n\r\n\tgl_FragColor = vec4(c, opacity);\r\n}\r\n"},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),a=o(r),s=n(14),c=o(s),d=n(10),l=o(d),u=n(11),h=o(u),p=function m(e,t){var n=t.isDebug,o=t.config,r=t.isWall;i(this,m);for(var s=[],d=[],u=[],p=r?o.wallColor:n?o.tunnelDebugColor:o.floorTunnelColor,f=r?o.wallHeight:n?o.tunnelDebugHeight:o.tunnelHeight,v=r?f/2-.5:0,b=void 0,y=void 0,g=void 0,E=void 0,w=void 0,k=0;k<e.length;k+=4){b=e[k+2]-e[k]>e[k+3]-e[k+1],y=b?(e[k]+e[k+2])/2:e[k]+.5,E=b?e[k+2]-e[k]:1,g=b?e[k+1]+.5:(e[k+1]+e[k+3])/2,w=b?1:e[k+3]-e[k+1],s.push(y,v,g),d.push(E,f,w);var x=[Math.abs(Math.sin(157.21355*y)),Math.abs(Math.sin(157.21355*y*g))/3,Math.abs(Math.sin(157.21355*g))];u.push.apply(u,r&&n?x:p)}var T=new THREE.BoxBufferGeometry(1,1,1),R=new THREE.InstancedBufferGeometry;if(r||n)for(var _=0;_<T.attributes.position.array.length/3;_++)T.attributes.position.array[3*_+1]<0?T.attributes.uv.array[2*_+1]=0:T.attributes.uv.array[2*_+1]=1;R.addAttribute("position",T.attributes.position),R.addAttribute("normal",T.attributes.normal),R.addAttribute("uv",T.attributes.uv),R.setIndex(T.index),R.addAttribute("offset",new THREE.InstancedBufferAttribute(new Float32Array(s),3,1)),R.addAttribute("scale",new THREE.InstancedBufferAttribute(new Float32Array(d),3,1)),R.addAttribute("color",new THREE.InstancedBufferAttribute(new Float32Array(u),3,1));var M=THREE.UniformsUtils.clone(THREE.UniformsLib.lights);M.isDebug={value:n?1:0};var O=new THREE.RawShaderMaterial({uniforms:M,vertexShader:r||n?a["default"]:l["default"],fragmentShader:r||n?c["default"]:h["default"],side:THREE.FrontSide,transparent:!1,lights:!0}),P=new THREE.Mesh(R,O);return P.name=(r?"walls_isDebug:":"tunnels_isDebug")+n,P};t["default"]=p},function(e,t){e.exports="attribute vec3 position;\r\nattribute vec3 normal;\r\nattribute vec2 uv;\r\nattribute vec3 color;\r\n\r\nattribute vec3 offset;\r\nattribute vec3 scale;\r\n\r\nuniform mat4 viewMatrix;\r\nuniform mat4 projectionMatrix;\r\n\r\nvarying vec3 vNormal;\r\nvarying vec3 vColor;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n    mat4 modelMat = mat4(\r\n        scale.x, 0., 0., 0.,\r\n        0., scale.y, 0., 0.,\r\n        0., 0., scale.z, 0.,\r\n        offset.x, offset.y, offset.z, 1.\r\n    );\r\n\tgl_Position = projectionMatrix * viewMatrix * modelMat * vec4(position, 1.);\r\n\r\n\tvNormal = mat3(viewMatrix * modelMat) * normal;\r\n    vColor = color;\r\n    vUv = uv;\r\n}\r\n"},function(e,t){e.exports="precision mediump float;\r\nvarying vec3 vNormal;\r\n\r\n#include <common>\r\n#include <lights_pars>\r\n\r\nvarying vec3 vColor;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec3 c = vColor * sqrt(vUv.y);\r\n\r\n    #if NUM_DIR_LIGHTS > 0\r\n    vec3 light;\r\n\tfor (int i = 0; i < NUM_DIR_LIGHTS; i++) {\r\n\t\tlight = max( dot(normalize(vNormal), directionalLights[i].direction), 0.0) * directionalLights[i].color * 0.5;\r\n\t\tc += light;\r\n\t}\r\n\t#endif\r\n\r\n\tgl_FragColor = vec4(c, 1.0);\r\n}\r\n"},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=0,i=function r(e,t){n(this,r);var i=new THREE.Object3D;i.name="lines_container_"+o,o++;for(var a=new THREE.LineBasicMaterial({color:t}),s=0;s<e.length;s+=4){var c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(e[s],1,e[s+1]),new THREE.Vector3(e[s+2],1,e[s+3]));var d=new THREE.Line(c,a);i.add(d)}return i};t["default"]=i},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(4),s=o(a),c=n(8)(),d=function(){function e(t){var n=this;i(this,e),this.dungeonVisualizer=t,this.dungeon=null,this.dungeonParams=s["default"].dungeonParams,this.isDesktop=c.desktop(),this.buttonsContainer=document.getElementById("buttonsRoot"),this.mobileExitButton=document.getElementById("exitWalkerMobile");var o=new dat.GUI({width:300});this.gui=o,o.add(this.dungeonParams,"dungeonSize").min(1).max(100).step(1).name("Dungeon Size");var r=o.addFolder("Rooms");r.add(this.dungeonParams,"roomSizeDistribution",{normal:"normal",uniform:"uniform"}),r.add(this.dungeonParams,"roomSizeMean").min(5).max(30).step(1),r.add(this.dungeonParams,"roomSizeDeviation").min(.1).max(.9).step(.01),r.add(this.dungeonParams,"mainRoomThreshold").min(1).max(1.33).step(.01),o.add(this.dungeonParams,"connectivity").min(0).max(1).step(.01).name("Connectivity"),o.add(this.dungeonParams,"density").min(0).max(1).step(.01).name("Density"),o.add(s["default"].generationMode,"withWalls").name("Draw Walls").onChange(function(){n.resetDungeon(!0)}),o.add(s["default"].generationMode,"isDebug").name("Debug Mode").onChange(function(){n.resetDungeon(!0)}),o.add(this.dungeonParams,"fromDungeonId").name("From Dungeon ID"),o.add(this.dungeonParams,"dungeonId").name("Dungeon ID").onChange().listen();var a={exportToFile:function(){n.exportDungeon(n.dungeon,n.dungeonParams.dungeonId)}};o.add(a,"exportToFile").name("Export to File");var d={jumpToSource:function(){window.open(s["default"].global.repoUrl,"_blank")}};o.add(d,"jumpToSource").name("Go to Source Code"),this.isDesktop||o.close();var l=document.getElementById("generateButton");l.addEventListener("click",function(){n.resetDungeon()});var u=document.getElementById("walkerButton");u.addEventListener("click",function(){n.enableWalker()}),this.mobileExitButton.addEventListener("click",function(){n.dungeonVisualizer.controls.disableWalker()}),this.buttonsRoot=document.getElementById("buttonsRoot"),document.addEventListener("disableWalker",function(){n.buttonsRoot.style.display="",n.mobileExitButton.style.display="none",n.isDesktop&&o.open()})}return r(e,[{key:"resize",value:function(e,t){!this.isDesktop&&this.buttonsContainer&&(e>t?(this.buttonsContainer.style.width="50%",this.buttonsContainer.style.right="25%"):(this.buttonsContainer.style.width="100%",this.buttonsContainer.style.right="0"))}},{key:"generateNewDungeonId",value:function(){var e=(Math.random()+1).toString(36).substring(7,16),t=e+","+this.dungeonParams.dungeonSize+","+this.dungeonParams.roomSizeDistribution+","+this.dungeonParams.roomSizeMean+","+this.dungeonParams.roomSizeDeviation+","+this.dungeonParams.mainRoomThreshold+","+this.dungeonParams.connectivity+","+this.dungeonParams.density;return t}},{key:"resetDungeon",value:function(e){var t=e||this.dungeonParams.fromDungeonId?this.dungeonParams.dungeonId:this.generateNewDungeonId();this.dungeonParams.dungeonId=t;var n=window.dungeonizer.generateDungeonById(t,s["default"].generationMode.withWalls,s["default"].generationMode.isDebug);this.dungeon=n,this.dungeonVisualizer.makeDungeonVisual(this.dungeon,this.dungeonParams.dungeonId)}},{key:"enableWalker",value:function(){this.dungeonVisualizer.controls.enableWalker(this.dungeon),this.isDesktop||(this.mobileExitButton.style.display="table"),this.gui.close(),this.buttonsRoot.style.display="none"}},{key:"exportDungeon",value:function(e,t){var n=JSON.stringify({dungeonId:t,dungeon:e},null,4);window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,1048576,function(e){e.root.getFile("dungeon_"+t+".bin",{create:!0},function(e){e.createWriter(function(t){var o=new Blob([n]);t.addEventListener("writeend",function(){location.href=e.toURL()},!1),t.write(o)},function(){})},function(){})},function(){})}}]),e}();t["default"]=d},function(e,t){"use strict";e.exports=function(){if(window.WebGLRenderingContext){for(var e=document.createElement("canvas"),t=["webgl","experimental-webgl","moz-webgl"],n=!1,o=0;o<t.length;o++)try{if(n=e.getContext(t[o]),n&&"function"==typeof n.getParameter)return!0}catch(i){console.log("Unable to initialize WebGL. Your browser may not support it.")}return!1}return!1}}])});